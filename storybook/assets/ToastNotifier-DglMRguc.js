import{R as nt,r as R,j as rt}from"./iframe-DePnZJLt.js";import{g as ut}from"./index-D9WrIkEy.js";import{T as ft}from"./Toast-CRm7HbGP.js";const x={},F=(t,n)=>t.unstable_is?t.unstable_is(n):n===t,k=t=>"init"in t,M=t=>!!t.write,B=t=>"v"in t||"e"in t,z=t=>{if("e"in t)throw t.e;if((x?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},U=new WeakMap,H=t=>{var n;return C(t)&&!!((n=U.get(t))!=null&&n[0])},dt=t=>{const n=U.get(t);n?.[0]&&(n[0]=!1,n[1].forEach(r=>r()))},st=(t,n)=>{let r=U.get(t);if(!r){r=[!0,new Set],U.set(t,r);const c=()=>{r[0]=!1};t.then(c,c)}r[1].add(n)},C=t=>typeof t?.then=="function",ot=(t,n,r)=>{r.p.has(t)||(r.p.add(t),n.then(()=>{r.p.delete(t)},()=>{r.p.delete(t)}))},q=(t,n,r)=>{const c=r(t),f="v"in c,h=c.v;if(C(n))for(const v of c.d.keys())ot(t,n,r(v));c.v=n,delete c.e,(!f||!Object.is(h,c.v))&&(++c.n,C(h)&&dt(h))},m=(t,n,r)=>{var c;const f=new Set;for(const h of((c=r.get(t))==null?void 0:c.t)||[])r.has(h)&&f.add(h);for(const h of n.p)f.add(h);return f},at=Symbol(),ht=(t=new WeakMap,n=new WeakMap,r=new WeakMap,c=new Set,f=new Set,h=new Set,v={},T=(a,...g)=>a.read(...g),E=(a,...g)=>a.write(...g),d=(a,g)=>{var b;return(b=a.unstable_onInit)==null?void 0:b.call(a,g)},y=(a,g)=>{var b;return(b=a.onMount)==null?void 0:b.call(a,g)},...S)=>{const a=S[0]||(e=>{if((x?"production":void 0)!=="production"&&!e)throw new Error("Atom is undefined or null");let u=t.get(e);return u||(u={d:new Map,p:new Set,n:0},t.set(e,u),d?.(e,G)),u}),g=S[1]||(()=>{const e=[],u=l=>{try{l()}catch(o){e.push(o)}};do{v.f&&u(v.f);const l=new Set,o=l.add.bind(l);c.forEach(s=>{var i;return(i=n.get(s))==null?void 0:i.l.forEach(o)}),c.clear(),h.forEach(o),h.clear(),f.forEach(o),f.clear(),l.forEach(u),c.size&&b()}while(c.size||h.size||f.size);if(e.length)throw new AggregateError(e)}),b=S[2]||(()=>{const e=[],u=new WeakSet,l=new WeakSet,o=Array.from(c);for(;o.length;){const s=o[o.length-1],i=a(s);if(l.has(s)){o.pop();continue}if(u.has(s)){if(r.get(s)===i.n)e.push([s,i]);else if((x?"production":void 0)!=="production"&&r.has(s))throw new Error("[Bug] invalidated atom exists");l.add(s),o.pop();continue}u.add(s);for(const w of m(s,i,n))u.has(w)||o.push(w)}for(let s=e.length-1;s>=0;--s){const[i,w]=e[s];let p=!1;for(const P of w.d.keys())if(P!==i&&c.has(P)){p=!0;break}p&&(A(i),N(i)),r.delete(i)}}),A=S[3]||(e=>{var u;const l=a(e);if(B(l)&&(n.has(e)&&r.get(e)!==l.n||Array.from(l.d).every(([_,W])=>A(_).n===W)))return l;l.d.clear();let o=!0;const s=()=>{n.has(e)&&(N(e),b(),g())},i=_=>{var W;if(F(e,_)){const Z=a(_);if(!B(Z))if(k(_))q(_,_.init,a);else throw new Error("no atom init");return z(Z)}const K=A(_);try{return z(K)}finally{l.d.set(_,K.n),H(l.v)&&ot(e,l.v,K),(W=n.get(_))==null||W.t.add(e),o||s()}};let w,p;const P={get signal(){return w||(w=new AbortController),w.signal},get setSelf(){return(x?"production":void 0)!=="production"&&!M(e)&&console.warn("setSelf function cannot be used with read-only atom"),!p&&M(e)&&(p=(..._)=>{if((x?"production":void 0)!=="production"&&o&&console.warn("setSelf function cannot be called in sync"),!o)try{return D(e,..._)}finally{b(),g()}}),p}},V=l.n;try{const _=T(e,i,P);return q(e,_,a),C(_)&&(st(_,()=>w?.abort()),_.then(s,s)),l}catch(_){return delete l.v,l.e=_,++l.n,l}finally{o=!1,V!==l.n&&r.get(e)===V&&(r.set(e,l.n),c.add(e),(u=v.c)==null||u.call(v,e))}}),$=S[4]||(e=>{const u=[e];for(;u.length;){const l=u.pop(),o=a(l);for(const s of m(l,o,n)){const i=a(s);r.set(s,i.n),u.push(s)}}}),D=S[5]||((e,...u)=>{let l=!0;const o=i=>z(A(i)),s=(i,...w)=>{var p;const P=a(i);try{if(F(e,i)){if(!k(i))throw new Error("atom not writable");const V=P.n,_=w[0];q(i,_,a),N(i),V!==P.n&&(c.add(i),(p=v.c)==null||p.call(v,i),$(i));return}else return D(i,...w)}finally{l||(b(),g())}};try{return E(e,o,s,...u)}finally{l=!1}}),N=S[6]||(e=>{var u;const l=a(e),o=n.get(e);if(o&&!H(l.v)){for(const[s,i]of l.d)if(!o.d.has(s)){const w=a(s);j(s).t.add(e),o.d.add(s),i!==w.n&&(c.add(s),(u=v.c)==null||u.call(v,s),$(s))}for(const s of o.d||[])if(!l.d.has(s)){o.d.delete(s);const i=O(s);i?.t.delete(e)}}}),j=S[7]||(e=>{var u;const l=a(e);let o=n.get(e);if(!o){A(e);for(const s of l.d.keys())j(s).t.add(e);if(o={l:new Set,d:new Set(l.d.keys()),t:new Set},n.set(e,o),(u=v.m)==null||u.call(v,e),M(e)){const s=()=>{let i=!0;const w=(...p)=>{try{return D(e,...p)}finally{i||(b(),g())}};try{const p=y(e,w);p&&(o.u=()=>{i=!0;try{p()}finally{i=!1}})}finally{i=!1}};f.add(s)}}return o}),O=S[8]||(e=>{var u;const l=a(e);let o=n.get(e);if(o&&!o.l.size&&!Array.from(o.t).some(s=>{var i;return(i=n.get(s))==null?void 0:i.d.has(e)})){o.u&&h.add(o.u),o=void 0,n.delete(e),(u=v.u)==null||u.call(v,e);for(const s of l.d.keys()){const i=O(s);i?.t.delete(e)}return}return o}),lt=[t,n,r,c,f,h,v,T,E,d,y,a,g,b,A,$,D,N,j,O],G={get:e=>z(A(e)),set:(e,...u)=>{try{return D(e,...u)}finally{b(),g()}},sub:(e,u)=>{const o=j(e).l;return o.add(u),g(),()=>{o.delete(u),O(e),g()}}};return Object.defineProperty(G,at,{value:lt}),G},vt=ht,tt=st,it={};let _t=0;function J(t,n){const r=`atom${++_t}`,c={toString(){return(it?"production":void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof t=="function"?c.read=t:(c.init=t,c.read=wt,c.write=yt),n&&(c.write=n),c}function wt(t){return t(this)}function yt(t,n,r){return n(this,typeof r=="function"?r(t(this)):r)}function St(){return vt()}let I;function gt(){return I||(I=St(),(it?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=I),globalThis.__JOTAI_DEFAULT_STORE__!==I&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),I}const pt={},bt=R.createContext(void 0);function ct(t){return R.useContext(bt)||gt()}const X=t=>typeof t?.then=="function",Y=t=>{t.status||(t.status="pending",t.then(n=>{t.status="fulfilled",t.value=n},n=>{t.status="rejected",t.reason=n}))},Et=nt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(Y(t),t)}),Q=new WeakMap,et=(t,n)=>{let r=Q.get(t);return r||(r=new Promise((c,f)=>{let h=t;const v=d=>y=>{h===d&&c(y)},T=d=>y=>{h===d&&f(y)},E=()=>{try{const d=n();X(d)?(Q.set(d,r),h=d,d.then(v(d),T(d)),tt(d,E)):c(d)}catch(d){f(d)}};t.then(v(t),T(t)),tt(t,E)}),Q.set(t,r)),r};function Tt(t,n){const{delay:r,unstable_promiseStatus:c=!nt.use}={},f=ct(),[[h,v,T],E]=R.useReducer(y=>{const S=f.get(t);return Object.is(y[0],S)&&y[1]===f&&y[2]===t?y:[S,f,t]},void 0,()=>[f.get(t),f,t]);let d=h;if((v!==f||T!==t)&&(E(),d=f.get(t)),R.useEffect(()=>{const y=f.sub(t,()=>{if(c)try{const S=f.get(t);X(S)&&Y(et(S,()=>f.get(t)))}catch{}if(typeof r=="number"){setTimeout(E,r);return}E()});return E(),y},[f,t,r,c]),R.useDebugValue(d),X(d)){const y=et(d,()=>f.get(t));return c&&Y(y),Et(y)}return d}function It(t,n){const r=ct();return R.useCallback((...f)=>{if((pt?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return r.set(t,...f)},[r,t])}const L=J([]);J(t=>t(L).length);const xt=J(null,(t,n,r)=>{const c=ut().randomUUID();n(L,f=>[...f,rt.jsx(ft,{message:r,severity:"info",onClose:()=>n(L,h=>[...h.filter(v=>v.key!==c)]),disablePosition:!0},c)])});J(null,(t,n)=>n(L,[]));function At(){const t=Tt(L);return rt.jsx("div",{className:"stack absolute right-5 bottom-5",children:t})}At.__docgenInfo={description:"",methods:[],displayName:"ToastNotifier"};export{At as T,xt as t,It as u};
