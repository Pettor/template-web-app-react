import{c as P,I as N,q as k,w as B,u as v,a as M,E as _,F as E,H as V,j as a}from"./index-IXPZLadX.js";import{b as $}from"./index-BPnbHdHF.js";import{I as q}from"./InputField-DVOCsLAd.js";import{u as I}from"./UseToastNotifier-BzrUrYyp.js";import{B as R}from"./BlueFadeBackground-bjBbzqVH.js";import{G as O,B as T}from"./BasicLayout-9mb8AGTv.js";import{u as C,o as J,B as L}from"./yup-CdVSpZB0.js";import{F as z}from"./EnvelopeIcon-aTjVr9Rq.js";import{F as A}from"./XMarkIcon-CrilX6eH.js";async function D(t){try{await k.post("/api/users/forgot-password",{email:t})}catch(e){throw B.create(e)}}function G(){const t=P.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:H},t[0]=e):e=t[0],N(e)}async function H(t){await D(t)}function Q(){const t=P.c(15),{appName:e}=_(),i=v(),g=M(),{isPending:s,mutateAsync:o}=G(),{addToast:d,clearToasts:n}=I();let c;t[0]!==i?(c=function(){console.log("handleBack"),i("/login")},t[0]=i,t[1]=c):c=t[1];const u=c;let m;t[2]!==d||t[3]!==n||t[4]!==g||t[5]!==i||t[6]!==o?(m=async function(w){const{email:b}=w;n();try{await o(b),i("/")}catch{d(g.formatMessage({description:"ForgotPasswordPage - Forgot password error alert title",defaultMessage:"Something went wrong",id:"gmuIUo"}))}},t[2]=d,t[3]=n,t[4]=g,t[5]=i,t[6]=o,t[7]=m):m=t[7];const f=m;let r;t[8]!==f||t[9]!==s?(r={loading:s,onSubmit:f},t[8]=f,t[9]=s,t[10]=r):r=t[10];let l;return t[11]!==e||t[12]!==u||t[13]!==r?(l={appName:e,onBack:u,resetForm:r},t[11]=e,t[12]=u,t[13]=r,t[14]=l):l=t[14],l}function U(t){const e=P.c(29),{loading:i,onSubmit:g}=t,s=M();let o,d;if(e[0]!==s){const S=E().shape({email:V().email(s.formatMessage({description:"ForgotPasswordFormValidation - Email must be valid",defaultMessage:"Email must be valid",id:"4lmP9Q"})).required(s.formatMessage({description:"ForgotPasswordFormValidation - Email is required",defaultMessage:"Email is required",id:"wtHdxy"}))}).required();d=C,o=J(S),e[0]=s,e[1]=o,e[2]=d}else o=e[1],d=e[2];let n;e[3]!==o?(n={resolver:o},e[3]=o,e[4]=n):n=e[4];const{handleSubmit:c,register:u,formState:m}=d(n),{errors:f}=m;let r;e[5]!==c||e[6]!==g?(r=c(g),e[5]=c,e[6]=g,e[7]=r):r=e[7];let l;e[8]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(z,{className:"h-5 w-5"}),e[8]=l):l=e[8];const p=f.email?.message;let w;e[9]!==u?(w=u("email"),e[9]=u,e[10]=w):w=e[10];let b;e[11]!==p||e[12]!==w?(b=a.jsx(q,{autoFocus:!0,id:"email",type:"text",placeholder:"Email",icon:l,error:p,...w,"data-testid":"forgot-password-form__email-input"}),e[11]=p,e[12]=w,e[13]=b):b=e[13];let x;e[14]!==s?(x=s.formatMessage({description:"ForgotPasswordFormValidation - Send button title",defaultMessage:"Submit",id:"ojcPit"}),e[14]=s,e[15]=x):x=e[15];let h;e[16]!==s?(h=s.formatMessage({description:"ForgotPasswordFormValidation - Send button title",defaultMessage:"Submit",id:"ojcPit"}),e[16]=s,e[17]=h):h=e[17];let F;e[18]!==s?(F=s.formatMessage({description:"ForgotPasswordFormValidation - Send",defaultMessage:"Send",id:"r3YQJ5"}),e[18]=s,e[19]=F):F=e[19];let j;e[20]!==i||e[21]!==x||e[22]!==h||e[23]!==F?(j=a.jsx(L,{loading:i,type:"submit",className:"btn btn-primary text-base-100 dark:text-base-300 z-20 w-full",title:x,"aria-label":h,"data-testid":"forgot-password-form__submit-button",children:F}),e[20]=i,e[21]=x,e[22]=h,e[23]=F,e[24]=j):j=e[24];let y;return e[25]!==j||e[26]!==r||e[27]!==b?(y=a.jsxs("form",{onSubmit:r,className:"flex flex-col",children:[b,j]}),e[25]=j,e[26]=r,e[27]=b,e[28]=y):y=e[28],y}function W(t){const e=P.c(21),{appName:i,resetForm:g,onBack:s}=t,o=M();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsxs(a.Fragment,{children:[a.jsx(R,{}),a.jsx(O,{})]}),e[0]=d):d=e[0];let n;e[1]!==o?(n=o.formatMessage({description:"ForgotPasswordView - Back button title",defaultMessage:"Back",id:"bz4LRs"}),e[1]=o,e[2]=n):n=e[2];let c;e[3]!==o?(c=o.formatMessage({description:"ForgotPasswordView - Back button aria label",defaultMessage:"Back",id:"lJxJFw"}),e[3]=o,e[4]=c):c=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(A,{className:"h-6 w-6"}),e[5]=u):u=e[5];let m;e[6]!==s||e[7]!==n||e[8]!==c?(m=a.jsx("div",{className:"card-actions justify-end",children:a.jsx("button",{className:"btn btn-square btn-sm",onClick:s,title:n,"aria-label":c,children:u})}),e[6]=s,e[7]=n,e[8]=c,e[9]=m):m=e[9];let f;e[10]!==i||e[11]!==o?(f=o.formatMessage({description:"ForgotPasswordView - Reset password description",defaultMessage:"Enter your {appName} email adress that you used to register. We'll send you an email with your username and a link to reset your password.",id:"02xDV+"},{appName:i}),e[10]=i,e[11]=o,e[12]=f):f=e[12];let r;e[13]!==f?(r=a.jsx("span",{className:"mt-8 text-center text-base",children:f}),e[13]=f,e[14]=r):r=e[14];let l;e[15]!==g?(l=a.jsx("div",{className:"mt-4 mb-2 px-4 md:mt-8 md:px-12",children:a.jsx(U,{...g})}),e[15]=g,e[16]=l):l=e[16];let p;return e[17]!==m||e[18]!==r||e[19]!==l?(p=a.jsx(T,{className:"dark:bg-base-300/40",backgroundElement:d,children:a.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:a.jsx("div",{className:"hero",children:a.jsx("div",{className:"hero-content w-full flex-col lg:flex-row-reverse",children:a.jsx("div",{className:"card bg-base-100 min-h-[550px] w-full shrink-0 shadow-2xl sm:w-[550px]",children:a.jsxs("div",{className:"card-body w-full",children:[m,r,l]})})})})})}),e[17]=m,e[18]=r,e[19]=l,e[20]=p):p=e[20],p}function re(){const t=P.c(2);$("Forgot Password");const e=Q();let i;return t[0]!==e?(i=a.jsx(W,{...e}),t[0]=e,t[1]=i):i=t[1],i}export{re as Component};
